unit Model.DAO.Imp.Caixa.Diario.Encerramento;

interface

uses
  Data.DB,
  System.SysUtils,

  Uteis.Interfaces,
  Uteis,
  Uteis.Tratar.Mensagens,

  Model.DAO.Caixa.Diario.Encerramento.Interfaces,
  Model.Entidade.Caixa.Diario.Encerramento.Interfaces,
  Model.Conexao.Firedac.Interfaces,
  Model.Conexao.Query.Interfaces,
  Model.Entidade.Imp.Caixa.Diario.Encerramento,
  Model.Conexao.Firedac.MySQL.Imp,
  Model.Conexao.Query.Imp;

type
  TDAOCaixaDiarioMovimento= class(TInterfacedObject, iDAOCaixaDiarioEncerramento)
    private
      FCaixaDiarioEncerramento : iEntidadeCaixaDiarioEncerramento<iDAOCaixaDiarioEncerramento>;
      FConexao     : iConexao;
      FDataSet     : TDataSet;
      FQuery       : iQuery;
      FUteis       : iUteis;
      FMSG         : TMensagens;

    const
      FSQL=('select '+
            'cdm.id, '+
            'cdm.idcaixadiario, '+
            'cdm.idpedido, '+
            'cdm.idformapagamento, '+
            'cdm.idusuario, '+
            'u.nomeusuario, '+
            'cdm.valorlancamento, '+
            'cdm.datahoraemissao, '+
            'cdm.tipolancamento '+
            'from caixadiariomovimento cdm '+
            'inner join usuario u on u.id = cdm.idusuario '
            );
      function LoopRegistro(Value : Integer): Integer;
    public
      constructor Create;
      destructor Destroy; override;
      class function New : iDAOCaixaDiarioEncerramento;

      function DataSet    (DataSource : TDataSource) : iDAOCaixaDiarioEncerramento; overload;
      function DataSet                               : TDataSet;                    overload;
      function GetAll                                : iDAOCaixaDiarioEncerramento;
      function GetbyId    (Id : Variant)             : iDAOCaixaDiarioEncerramento;
      function GetbyParams                           : iDAOCaixaDiarioEncerramento; overload;
      function GetbyParams(aIdUsuario : Variant)     : iDAOCaixaDiarioEncerramento; overload;
      function GetbyParams(aNomeUsuario : String)    : iDAOCaixaDiarioEncerramento; overload;
      function GetbyParams(aIdPedido : Integer)      : iDAOCaixaDiarioEncerramento; overload;
      function Post                                  : iDAOCaixaDiarioEncerramento;
      function Put                                   : iDAOCaixaDiarioEncerramento;
      function Delete                                : iDAOCaixaDiarioEncerramento;
      function QuantidadeRegistro                    : Integer;

      function This : iEntidadeCaixaDiarioEncerramento<iDAOCaixaDiarioEncerramento>;
  end;

implementation

end.
